@import twatcher.models.{Account, Script}
@import twatcher.controllers.routes

@(period: Int, accountList: List[Account], scriptList: List[Script])(implicit messages: Messages)

@title(value: Html) = {
  <div class="col-sm-2 col-xs-4 title">
    @value
  </div>
}

@body(description: Html)(value: Html) = {
  <div class="col-sm-10 col-xs-8">
    <div class="description">
      @description
    </div>
    <div>
      @value
    </div>
  </div>
}

@common {
  <div id="setting">
    <div class="row setting-row">
      @title {
        @Messages("setting.period.title")
      }
      @body {
        @Messages("setting.period.description")
      }{
        <form action="@routes.SettingController.updatePeriod" method="POST">
          <input type="number" name="period" value="@period">
          <span>@Messages("setting.period.unit")</span>
          <input type="submit" value="@Messages("button.update")">
        </form>
      }
    </div>

    <div class="row setting-row">
      @title {
        @Messages("setting.script.title")
      }
      @body {
        @Messages("setting.script.description")
      }{
        @scriptList.map { script =>
          <div class="script-form">
            <form action="@routes.SettingController.updateScript" method="POST">
              <input type="text" name="path" value="@script.path">
              <input type="hidden" name="id" value="@script.id">
              <input type="submit" value="@Messages("button.update")">
            </form>
            <form action="@routes.SettingController.deleteScript" method="POST">
              <input type="hidden" name="path" value="@script.path">
              <input type="hidden" name="id" value="@script.id">
              <input type="submit" value="@Messages("button.delete")">
            </form>
          </div>
        }
        <form action="@routes.SettingController.createScript" method="POST">
          <input type="text" name="path">
          <input type="submit" value="@Messages("button.add")">
        </form>
      }
    </div>

    <div class="row setting-row">
      @title {
        @Messages("setting.account.title")
      }
      @body {
        @Messages("setting.account.description")
      }{
        @accountList.map { account =>
          <div class="account-form row">
            <div class="col-sm-1">
              <img src="@account.imageUrl" alt="@account.screenName">
            </div>
            <div class="col-sm-2">
              @@@account.screenName
            </div>
            <div class="col-sm-3 authentication">
              <span class="auth-check">@Messages("setting.account.authentication.title")</span>
              <span class="auth-ok">@Messages("setting.account.authentication.ok")</span>
              <span class="auth-failed">@Messages("setting.account.authentication.failed")</span>
            </div>
            <div class="col-sm-2">
              <form action="@routes.SettingController.deleteAccount" method="POST">
                <input type="hidden" name="userId" value="@account.userId">
                <input type="submit" value="@Messages("button.delete")">
              </form>
            </div>
          </div>
        }
        <form action="@routes.TwitterController.login" method="GET">
          <input type="submit" value="@Messages("button.add")">
        </form>
      }
    </div>
  </div>
}
